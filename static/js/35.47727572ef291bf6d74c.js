webpackJsonp([35],{ZL9z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("IHPB"),l=a.n(i),s=a("HzJ8"),o=a.n(s),n=a("zbPT"),d=a("4T3X"),c=a("YgaF"),r=a("U6op"),u=a("4spO"),h={props:{dataName:{type:String,default:"sns"},actionUrl:{type:String,default:u.a.api+"/upload/sn"}},data:function(){return{fileList:[]}},mounted:function(){this.fileList=[]},methods:{handleExceed:function(t,e){this.$message.warning("当前限制选择 1个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},successFile:function(t,e,a){if(t.result){var i=[];t.result.forEach(function(t){i.push(t.sn)}),this.$parent.dialog&&(this.$parent.dialog.data[this.dataName]=i.join("\n")),this.$parent.$parent.$parent.$parent.$parent.dialog&&(this.$parent.$parent.$parent.$parent.$parent.dialog.data[this.dataName]=i.join("\n"))}else this.$message.warning("请上传excel格式的文件")},errorFile:function(t,e,a){this.$message.warning(t.message||"上传失败请检查上传内容")},removeFile:function(t,e){this.$parent.dialog&&(this.$parent.dialog.data[this.dataName]=void 0),this.$parent.$parent.$parent.$parent.$parent.dialog&&(this.$parent.$parent.$parent.$parent.$parent.dialog.data[this.dataName]=void 0)},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionUrl,limit:1,"on-exceed":t.handleExceed,"on-success":t.successFile,"on-error":t.errorFile,"on-remove":t.removeFile,"before-remove":t.beforeRemove,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("i",{staticClass:"el-icon-upload el-icon--right"}),t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xlsx文件，文件名不能为中文,且不超过500kb")])],1)},staticRenderFns:[]},f=[{code:"idMine",name:"矿场中文名",new:!0,up:!1},{code:"noRoom",name:"机房号",new:!0,up:!1},{code:"noShelfStart",name:"货架起始号",new:!0,up:!1},{code:"noShelfEnd",name:"货架结束号",new:!0,up:!1},{code:"noMachineStart",name:"机位起始号",new:!0,up:!1},{code:"noMachineEnd",name:"机位结束号",new:!0,up:!1},{code:"statusReady",name:"可用状态",new:!0,up:!0},{code:"statusUse",name:"使用状态",new:!0,up:!0},{code:"idMachineVersion",name:"适用矿机型号",new:!0,up:!0}],m={data:function(){return{list:{query:{},data:[],loading:!1},historySelectionList:[],pageNo:1,totalCount:0,pageSize:10,dialog:{loading:!1,visible:!1,title:{c:"新增机位信息",u:"修改机位信息",v:"机位详情信息",up:"批量上架",elec:"批量设置通电状态",ua:"批量修改"},btn:{c:"新增",u:"修改",v:"关闭",up:"提交",down:"提交",elec:"提交",ua:"提交"},message:{up:"已上架机位不能重复上架",down:"已下架机位不能重复下架",ua:"",elec:"未使用机位不能设置通电状态"},status:["c","u","v"],data:{},rule:{noShelfEndMin:1,noMachineEndMin:1}},dialog2:{title:{c:"确认批量删除提示",u:"确认批量修改提示",down:"批量下架"},content:{c:"您确定将选择的机位删除？",u:"您确定将选择的机位使用状态修改为已使用？",down:"您确定将选择的机位下架?"},loading:!1,visible:!1,data:{},message:{type:"success",msg:"批量删除成功！"},status:["c","u","v"]},dict:{mines:{list:[],obj:{}},statusRd:{list:[],obj:{}},statusUs:{list:[],obj:{}},rooms:{list:[],obj:{}},roomsLs:{list:[],obj:{}},shelfVns:{list:[],obj:{}},statusElectrify:{list:[],obj:{}},snStatus:{list:[],obj:{}},ipStatus:{list:[],obj:{}},idAssetsOwner:{list:[],obj:{}},machineVns:{list:[],obj:{}}}}},components:{UploadSn:a("/Xao")(h,g,!1,null,null,null).exports},created:function(){this.initDict(),this.fetchData()},methods:{fetchData:function(){this.pageNo=1,this.search()},showPage:function(){this.$router.push({name:"seatCount"})},showDialog3:function(t){if(this.getSelectData().length<=0)this.$message({type:"error",message:"请先选择机位"});else{var e=!1,a=!1;this.getSelectData().forEach(function(t){1===t.statusUse&&(e=!0),t.sn||(a=!0)}),e?this.$message({type:"error",message:this.dialog.message[t]}):a?this.$message({type:"error",message:"未绑定sn的机位不能设置通电状态"}):(this.dialog.data={sns:void 0,statusElectrify:0,timeElectrify:new Date},this.dialog.status=t,this.dialog.visible=!0)}},checkCanClick:function(t){if(this.getSelectData().length<=0)return this.$message({type:"error",message:"请先选择机位"}),!1;var e=!1;return this.getSelectData().forEach(function(t){0===t.statusUse&&(e=!0)}),!e||"c"!==t&&"ua"!==t||(this.$message({type:"error",message:"c"===t?"已使用机位不能删除！":"已使用机位不能批量修改！"}),!1)},showDialog2:function(t){var e=this;if(this.checkCanClick(t))if(upDown&&"down"===t)this.$message({type:"error",message:"已下架机位不能重复下架"});else{this.dialog2.visible=!0,this.dialog2.status=t;var a=this.$createElement;this.$msgbox({title:this.dialog2.title[t],message:a("p",null,[a("span",null,this.dialog2.content[t])]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(a,i,l){"confirm"===a?(i.confirmButtonLoading=!0,i.confirmButtonText="执行中...",e.submit2(t,a,i,l)):l()}}).then(function(t){})}},handleSizeChange:function(t){var e=parseInt(this.pageNo*this.pageSize);this.pageNo=parseInt(e/t),this.pageSize=t,this.fetchData()},submit2:function(t,e,a,i){var l=this,s=void 0,o={ids:[]};this.getSelectData().forEach(function(t){o.ids.push(t.id)}),"c"===t?(s="批量删除成功！",o.operate=0):(s="批量修改成功！",o.operate=1,o.statusReady=this.dialog.data.statusReady),n.a.batch(o).then(function(t){l.dialog2.message.msg=s,l.multipleSelection=[],l.historySelectionList=[],l.fetchData(),l.$message({type:l.dialog2.message.type,message:s}),i?(i(),setTimeout(function(){a.confirmButtonLoading=!1},300)):(l.cancel(),l.dialog.loading=!1)}).catch(function(t){i?(i(),setTimeout(function(){a.confirmButtonLoading=!1},300)):(l.cancel(),l.dialog.loading=!1)})},cancel2:function(){this.dialog2.visible=!1},showDialog:function(t,e){("ua"!==t||this.checkCanClick(t))&&(this.dialog.data={idMine:void 0,noRoom:void 0,idShelfVersion:void 0,statusReady:void 0,statusUse:1,idMachineVersion:void 0,noShelfStart:void 0,noShelfEnd:void 0,noMachineStart:void 0,noMachineEnd:void 0},this.dialog.status=t,this.dialog.visible=!0,"c"!==t&&"ua"!==t&&this.detail(e.id))},detail:function(t){var e=this;this.dialog.loading=!0,n.a.find(t).then(function(t){e.dialog.data=t.result,e.dialog.loading=!1}).catch(function(t){e.dialog.loading=!1})},check:function(t){var e=!0,a=!1,i=void 0;try{for(var l,s=o()(f);!(e=(l=s.next()).done);e=!0){var n=l.value,d=this.dialog.data[n.code];if(("idMachineVersion"===n.code||"idAssetsOwner"===n.code)&&1===this.dialog.data.statusUse)break;if((void 0===d||null===d||""===d.toString().trim())&&("c"===this.dialog.status&&n.new||"u"===this.dialog.status&&n.up)){var c=n.name+"不能为空！";return this.$message.error(c),!1}}}catch(t){a=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}if("ua"===this.dialog.status&&(void 0===(d=this.dialog.data.statusReady)||null===d||""===d.toString().trim())){return this.$message.error("可用状态不能为空"),!1}if("elec"===this.dialog.status){var r=this.dialog.data.statusElectrify,u=this.dialog.data.timeElectrify;if(void 0===r||null===r||""===r.toString().trim()){return this.$message.error("通电状态不能为空！"),!1}if(void 0===u||null===u||""===u.toString().trim()){var h=this.dict.statusElectrify.obj[r]+"日期不能为空！";return this.$message.error(h),!1}}return!0},submit:function(t){var e=this;if(this.dialog.loading=!0,this.check())if("c"===this.dialog.status)this.dialog.data.nameCnMine=this.dict.mines.obj[this.dialog.data.idMine],this.dialog.data.nameMachineVersion=this.dict.machineVns.obj[this.dialog.data.idMachineVersion],this.dialog.data.statusElectrify=1,n.a.create(this.dialog.data).then(function(a){e.submitSuccess(t)}).catch(function(t){e.dialog.loading=!1});else if("u"===this.dialog.status){var a={id:this.dialog.data.id,nameMachineVersion:this.dict.machineVns.obj[this.dialog.data.idMachineVersion],remark:this.dialog.data.remark},i=!0,s=!1,d=void 0;try{for(var c,r=o()(f);!(i=(c=r.next()).done);i=!0){var u=c.value;u.up&&(a[u.code]=this.dialog.data[u.code])}}catch(t){s=!0,d=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw d}}a.remark=this.dialog.data.remark||"",n.a.update(a).then(function(t){e.submitSuccess()}).catch(function(t){e.dialog.loading=!1})}else if("elec"===this.dialog.status){var h={},g=[].concat(l()(this.getSelectData()||[]));h.ids=[],g.forEach(function(t){h.ids.push(t.id)}),h.operate=2,h.statusElectrify=this.dialog.data.statusElectrify,h.timeElectrify=this.dialog.data.timeElectrify,n.a.batch(h).then(function(t){e.$message({type:"success",message:e.dialog.title[e.dialog.status]+"成功"}),e.cancel(),e.fetchData(),e.dialog.loading=!1}).catch(function(t){e.dialog.loading=!1})}else"ua"===this.dialog.status?this.submit2(this.dialog.status):this.dialog.loading=!1;else this.dialog.loading=!1},submitSuccess:function(t){"save"===t?(this.dialog.data.noMachineStart=void 0,this.dialog.data.noMachineEnd=void 0,this.dialog.remark="",this.dialog.loading=!1,this.$message({message:this.dialog.title[this.dialog.status]+"成功",type:"success"})):(this.dialog.loading=!1,this.$message({message:this.dialog.title[this.dialog.status]+"成功",type:"success"}),this.cancel()),this.fetchData()},cancel:function(){this.dialog.visible=!1},currentChange:function(t){this.historySelectionList=[].concat(l()(this.historySelectionList),l()(this.multipleSelection||[])),this.pageNo=t,this.search()},handleSelectionChange:function(t){this.multipleSelection=t},getSelectData:function(){return[].concat(l()(this.historySelectionList),l()(this.multipleSelection||[]))},proccessDateSeltect:function(t){var e=this,a=[],i=this;t.forEach(function(t,e){for(var l=0;l<i.historySelectionList.length;l++)if(t.id===i.historySelectionList[l].id){a.push(e),i.historySelectionList.remove(l);break}}),a.forEach(function(a){e.$refs.multipleTable.toggleRowSelection(t[a])})},search:function(){var t=this;this.list.loading=!0,this.list.query.pageNo=this.pageNo,this.list.query.pageSize=this.pageSize,n.a.findAll(this.list.query).then(function(e){t.list.data=e.result.recordList,t.totalCount=e.result.totalRecord,e.result.recordList.length>0&&t.$nextTick(function(){t.proccessDateSeltect(e.result.recordList)}),t.list.loading=!1}).catch(function(e){t.list.loading=!1})},initDict:function(){var t=this;Object(d.a)("local_1").then(function(t){this.dict.statusRd=t}.bind(this)),Object(d.a)("local_2").then(function(t){this.dict.statusUs=t}.bind(this)),Object(d.a)("local_10").then(function(t){this.dict.statusElectrify=t}.bind(this)),Object(d.a)("local_12").then(function(t){this.dict.snStatus=t}.bind(this)),Object(d.a)("local_13").then(function(t){this.dict.ipStatus=t}.bind(this)),c.a.getMineList().then(function(t){this.dict.mines=t}.bind(this)),c.a.getShelfList().then(function(t){this.dict.shelfVns=t}.bind(this)),c.a.getMachineList().then(function(t){this.dict.machineVns=t}.bind(this)),Object(d.a)("local_3").then(function(t){this.dict.rooms2=t}.bind(this));var e={pageNo:0,pageSize:0};r.a.findAll(e).then(function(e){var a=e.result?e.result.recordList:[],i={};a.length>0&&a.forEach(function(t){t.name=t.nameShort,i[t.id]=t.nameShort});var l={};l.list=a||[],l.obj=i,t.dict.idAssetsOwner=l})},download:function(){n.a._download(this.list.query)}},watch:{"dialog.data.noShelfStart":function(t,e){this.dialog.rule.noShelfEndMin=t},"dialog.data.noMachineStart":function(t,e){this.dialog.rule.noMachineEndMin=t},"dialog.data.idMine":function(t,e){var a=this;this.dict.rooms={list:[],obj:{}},this.dict.shelfVns={list:[],obj:{}},t&&c.a.getRoomList(t).then(function(t){a.dict.rooms=t}),"c"===this.dialog.status&&(this.dialog.data.noRoom=void 0,this.dialog.data.idShelfVersion=void 0)},"dialog.data.noRoom":function(t,e){var a=this;t&&c.a.getRoomList(this.dialog.data.idMine,t).then(function(t){a.dict.shelfVns=t}),this.dialog.data.idShelfVersion=void 0}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.list.query}},[a("el-form-item",{attrs:{label:"机位编号"}},[a("el-input",{model:{value:t.list.query.codeMachine,callback:function(e){t.$set(t.list.query,"codeMachine",e)},expression:"list.query.codeMachine"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"矿场中文名"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.list.query.idMine,callback:function(e){t.$set(t.list.query,"idMine",e)},expression:"list.query.idMine"}},t._l(t.dict.mines.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"可用状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.list.query.statusReady,callback:function(e){t.$set(t.list.query,"statusReady",e)},expression:"list.query.statusReady"}},t._l(t.dict.statusRd.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"使用状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.list.query.statusUse,callback:function(e){t.$set(t.list.query,"statusUse",e)},expression:"list.query.statusUse"}},t._l(t.dict.statusUs.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"通电状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.list.query.statusElectrify,callback:function(e){t.$set(t.list.query,"statusElectrify",e)},expression:"list.query.statusElectrify"}},t._l(t.dict.statusElectrify.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"是否已绑定SN"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.list.query.bindSn,callback:function(e){t.$set(t.list.query,"bindSn",e)},expression:"list.query.bindSn"}},t._l(t.dict.snStatus.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"是否已绑定IP"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.list.query.bindIp,callback:function(e){t.$set(t.list.query,"bindIp",e)},expression:"list.query.bindIp"}},t._l(t.dict.ipStatus.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchData}},[t._v("查询")]),t._v(" "),t.btn.add?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.showDialog("c")}}},[t._v(t._s(t.btn.add))]):t._e(),t._v(" "),t.btn.outexcl?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-success"},on:{click:function(e){t.download()}}},[t._v(t._s(t.btn.outexcl))]):t._e(),t._v(" "),t.btn.upshelves?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:""},on:{click:function(e){t.showDialog3("up")}}},[t._v(t._s(t.btn.upshelves))]):t._e(),t._v(" "),t.btn.downshelves?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:""},on:{click:function(e){t.showDialog2("down")}}},[t._v(t._s(t.btn.downshelves))]):t._e(),t._v(" "),t.btn.electrify?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:""},on:{click:function(e){t.showDialog3("elec")}}},[t._v(t._s(t.btn.electrify))]):t._e(),t._v(" "),t.btn.updateAll?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:""},on:{click:function(e){t.showDialog("ua")}}},[t._v(t._s(t.btn.updateAll))]):t._e(),t._v(" "),t.btn.delAll?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:""},on:{click:function(e){t.showDialog2("c")}}},[t._v(t._s(t.btn.delAll))]):t._e(),t._v(" "),t.btn.seatCount?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:""},on:{click:function(e){t.showPage("c")}}},[t._v(t._s(t.btn.seatCount))]):t._e()],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.list.loading,expression:"list.loading",modifiers:{body:!0}}],ref:"multipleTable",attrs:{stripe:"",data:t.list.data,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[t.btn.electrify||t.btn.updateAll||t.btn.delAll||t.btn.upshelves||t.btn.downshelves?a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"机位编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.codeMachine))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"矿场中文名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.nameMine))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"矿场英文名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.nameEnMine))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"机房号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.dict.rooms2.obj[e.row.noRoom]))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"货架号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("padStart")(e.row.noShelf,3,"0")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"机位号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("padStart")(e.row.noMachine,3,"0")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"适用矿机型号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.dict.machineVns.obj[e.row.idMachineVersion]))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"可用状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.dict.statusRd.obj[e.row.statusReady]))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"使用状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.dict.statusUs.obj[e.row.statusUse]))]}}])}),t._v(" "),t.btn.electrify?a("el-table-column",{attrs:{label:"通电状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.dict.statusElectrify.obj[e.row.statusElectrify]))]}}])}):t._e(),t._v(" "),t.btn.electrify?a("el-table-column",{attrs:{label:"通/断电时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.timeElectrify?[t._v(t._s(t._f("parseTime")(e.row.timeElectrify)))]:void 0}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"SN",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sn))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"IP",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.ip))]}}])}),t._v(" "),a("el-table-column",{staticStyle:{"white-space":"nowrap"},attrs:{align:"center",label:"操作","class-name":"mid-padding fixed-width",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.btn.edit?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showDialog("u",e.row)}}},[t._v(t._s(t.btn.edit))]):t._e(),t._v(" "),t.btn.info?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.showDialog("v",e.row)}}},[t._v(t._s(t.btn.info))]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"20px","text-align":"left"}},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageNo,"page-sizes":[5,10,20,30,40,50,60,70,80,90,100],total:t.totalCount,"page-size":t.pageSize},on:{"size-change":t.handleSizeChange,"current-change":t.currentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:t.dialog.title[t.dialog.status],visible:t.dialog.visible,width:"860px"},on:{"update:visible":function(e){t.$set(t.dialog,"visible",e)}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dialog.loading,expression:"dialog.loading"}],attrs:{model:t.dialog.data,"label-width":"100px"}},["c"===t.dialog.status||"u"===t.dialog.status||"v"===t.dialog.status?a("div",["c"!==t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-24"},[a("el-form-item",{attrs:{label:"机位编号"}},[a("el-input",{attrs:{disabled:"c"!==t.dialog.status},model:{value:t.dialog.data.codeMachine,callback:function(e){t.$set(t.dialog.data,"codeMachine",e)},expression:"dialog.data.codeMachine"}})],1)],1)]):t._e(),t._v(" "),a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"矿场中文名",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"c"!==t.dialog.status},model:{value:t.dialog.data.idMine,callback:function(e){t.$set(t.dialog.data,"idMine",e)},expression:"dialog.data.idMine"}},t._l(t.dict.mines.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"机房号",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"c"!==t.dialog.status},model:{value:t.dialog.data.noRoom,callback:function(e){t.$set(t.dialog.data,"noRoom",e)},expression:"dialog.data.noRoom"}},t._l(t.dict.rooms.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1)]),t._v(" "),"c"===t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-6"},[a("el-form-item",{attrs:{label:"货架起始号",required:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:999},model:{value:t.dialog.data.noShelfStart,callback:function(e){t.$set(t.dialog.data,"noShelfStart",e)},expression:"dialog.data.noShelfStart"}})],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-6"},[a("el-form-item",{attrs:{label:"货架结束号",required:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:t.dialog.rule.noShelfEndMin,max:999},model:{value:t.dialog.data.noShelfEnd,callback:function(e){t.$set(t.dialog.data,"noShelfEnd",e)},expression:"dialog.data.noShelfEnd"}})],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-6"},[a("el-form-item",{attrs:{label:"机位起始号",required:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:999},model:{value:t.dialog.data.noMachineStart,callback:function(e){t.$set(t.dialog.data,"noMachineStart",e)},expression:"dialog.data.noMachineStart"}})],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-6"},[a("el-form-item",{attrs:{label:"机位结束号",required:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:t.dialog.rule.noMachineEndMin,max:999},model:{value:t.dialog.data.noMachineEnd,callback:function(e){t.$set(t.dialog.data,"noMachineEnd",e)},expression:"dialog.data.noMachineEnd"}})],1)],1)]):t._e(),t._v(" "),"c"===t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"适用矿机型号",required:1!==t.dialog.data.statusUse}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.idMachineVersion,callback:function(e){t.$set(t.dialog.data,"idMachineVersion",e)},expression:"dialog.data.idMachineVersion"}},t._l(t.dict.machineVns.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1)]):t._e(),t._v(" "),"c"!==t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"货架号"}},["c"===t.dialog.status?a("el-input",{attrs:{disabled:"c"!==t.dialog.status},model:{value:t.dialog.data.noShelf,callback:function(e){t.$set(t.dialog.data,"noShelf",e)},expression:"dialog.data.noShelf"}}):t._e(),t._v(" "),"c"!==t.dialog.status?a("el-input",{attrs:{value:t._f("padStart")(t.dialog.data.noShelf,3,"0"),disabled:!0}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"机位号"}},["c"===t.dialog.status?a("el-input",{attrs:{disabled:"c"!==t.dialog.status},model:{value:t.dialog.data.noMachine,callback:function(e){t.$set(t.dialog.data,"noMachine",e)},expression:"dialog.data.noMachine"}}):t._e(),t._v(" "),"c"!==t.dialog.status?a("el-input",{attrs:{value:t._f("padStart")(t.dialog.data.noMachine,3,"0"),disabled:!0}}):t._e()],1)],1)]):t._e(),t._v(" "),a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"可用状态",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.statusReady,callback:function(e){t.$set(t.dialog.data,"statusReady",e)},expression:"dialog.data.statusReady"}},t._l(t.dict.statusRd.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),"v"===t.dialog.status?a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"使用状态",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.statusUse,callback:function(e){t.$set(t.dialog.data,"statusUse",e)},expression:"dialog.data.statusUse"}},t._l(t.dict.statusUs.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1):t._e()]),t._v(" "),"c"!==t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"适用矿机型号"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.idMachineVersion,callback:function(e){t.$set(t.dialog.data,"idMachineVersion",e)},expression:"dialog.data.idMachineVersion"}},t._l(t.dict.machineVns.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1)]):t._e(),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:"4",maxlength:"200",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.remark,callback:function(e){t.$set(t.dialog.data,"remark",e)},expression:"dialog.data.remark"}})],1)],1),t._v(" "),"c"!==t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"创建人"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dialog.data.nameCreator,callback:function(e){t.$set(t.dialog.data,"nameCreator",e)},expression:"dialog.data.nameCreator"}})],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:!0},model:{value:t.dialog.data.timeCreate,callback:function(e){t.$set(t.dialog.data,"timeCreate",e)},expression:"dialog.data.timeCreate"}})],1)],1)]):t._e(),t._v(" "),"v"===t.dialog.status?a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"修改人"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dialog.data.nameUpdater,callback:function(e){t.$set(t.dialog.data,"nameUpdater",e)},expression:"dialog.data.nameUpdater"}})],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"修改时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:!0},model:{value:t.dialog.data.timeUpdate,callback:function(e){t.$set(t.dialog.data,"timeUpdate",e)},expression:"dialog.data.timeUpdate"}})],1)],1)]):t._e()],1):a("div",["elec"===t.dialog.status?a("div",[a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"通电状态",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialog.data.statusElectrify,callback:function(e){t.$set(t.dialog.data,"statusElectrify",e)},expression:"dialog.data.statusElectrify"}},t._l(t.dict.statusElectrify.list,function(e,i){return 1!==e.id?a("el-option",{key:i,attrs:{label:e.name,value:e.id}}):t._e()}))],1)],1),t._v(" "),a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"通/断电时间",required:""}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime"},model:{value:t.dialog.data.timeElectrify,callback:function(e){t.$set(t.dialog.data,"timeElectrify",e)},expression:"dialog.data.timeElectrify"}})],1)],1)])],1):t._e(),t._v(" "),"ua"===t.dialog.status?a("div",[a("el-row",[a("div",{staticClass:"el-col el-col-12"},[a("el-form-item",{attrs:{label:"可用状态",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.statusReady,callback:function(e){t.$set(t.dialog.data,"statusReady",e)},expression:"dialog.data.statusReady"}},t._l(t.dict.statusRd.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)],1)])],1):t._e(),t._v(" "),"elec"!==t.dialog.status&&"ua"!==t.dialog.status?a("div",[a("el-row",[a("el-form-item",{attrs:{label:"批量导入SN"}},[t.dialog.visible?a("UploadSn",{attrs:{dataName:"sns"}}):t._e()],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"SN",required:""}},[a("el-input",{staticStyle:{"min-height":"33px"},attrs:{type:"textarea",rows:"6",placeholder:"请填写SN号",disabled:"v"===t.dialog.status},model:{value:t.dialog.data.sns,callback:function(e){t.$set(t.dialog.data,"sns",e)},expression:"dialog.data.sns"}})],1)],1)],1):t._e()]),t._v(" "),a("el-row",[a("div",{staticClass:"el-col el-col-16"},[a("el-form-item",["v"!==t.dialog.status?a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.dialog.btn[t.dialog.status]))]):t._e(),t._v(" "),"c"===t.dialog.status?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit("save")}}},[t._v("保存并继续新增")]):t._e(),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v(t._s("v"===t.dialog.status?t.dialog.btn[t.dialog.status]:"取消"))])],1)],1)])],1)],1)],1)},staticRenderFns:[]},v=a("/Xao")(m,p,!1,null,null,null);e.default=v.exports}});