webpackJsonp([36],{ysAI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("ZLEe"),a=i.n(n),l=i("Qb5e"),o=i("4T3X"),s=i("E4LH"),r={idMine:"矿场名称",idMineralPool:"矿池名称",nameCn:"根账户",nameEn:"子账户"},c={data:function(){return{formVisible:!1,sequenceStatus:!1,canClose:!1,dataOk:!1,formType:1,list:[],listLoading:!0,dialogLoading:!1,totalCount:0,pageNo:1,pageSize:10,listQuery:{nameEn:void 0,idMine:void 0,tokenStatus:void 0,pageSize:10,pageNo:1},dicts:{poolType:{list:[],obj:{}},initStatus:{list:[],obj:{}},tokenStatus:{list:[],obj:{}},mineList:[],poolList:[]},form:{id:"",initStatus:"",nameSubCn:"",token:"",nameCn:"",nameEn:"",idMine:"",idMineralPool:"",remark:"",tokenStatus:void 0,nameUpdater:"",timeUpdate:"",nameCreator:"",timeCreate:""}}},created:function(){this.getDict(),this.fetchData()},computed:{formTitle:function(){return 1===this.formType?"新增账户信息":2===this.formType?"修改账户信息":3===this.formType?"账户详细信息":void 0},btnName:function(){return 2===this.formType?"修改":"新增"}},methods:{getDict:function(){var e=this,t={pageSize:100};Object(l.e)(t).then(function(t){e.dicts.mineList=t.result.recordList}),Object(l.f)(t).then(function(t){e.dicts.poolList=t.result}),Object(o.a)("dict_11").then(function(e){this.dicts.poolType=e}.bind(this)),Object(o.a)("local_9").then(function(e){this.dicts.initStatus=e}.bind(this)),Object(o.a)("local_11").then(function(e){this.dicts.tokenStatus=e}.bind(this))},fetchData:function(){var e=this;this.listLoading=!0;var t={nameEn:this.listQuery.nameEn||void 0,idMine:this.listQuery.idMine||void 0,tokenStatus:void 0,pageNo:this.pageNo,pageSize:this.pageSize};1!==this.listQuery.tokenStatus&&0!==this.listQuery.tokenStatus||(t.tokenStatus=this.listQuery.tokenStatus),Object(l.d)(t).then(function(t){e.list=t.result.recordList,e.sequenceStatus&&e.setSequence(),e.dataOk=!0,e.totalCount=t.result.totalRecord,e.listLoading=!1})},handleSizeChange:function(e){this.pageSize=e,this.pageNo=1,this.fetchData()},sequenceBtn:function(e){e&&this.canClose?this.$message.error("排序号填写必须为数字且最多只能有两位小数"):this.canClose&&this.sequenceStatus||(this.sequenceStatus=!this.sequenceStatus,this.sequenceStatus&&this.setSequence())},setSequence:function(){this.list.forEach(function(e){e.newSquence=void 0,e.newSquence=e.sequence})},sequenceChange:function(e,t,i){var n=this;if(this.canClose=!1,!s.a.checkBasicNum(t))return this.$message.error("排序号填写必须为数字且最多只能有两位小数"),void(this.canClose=!0);t!=this.list[e].sequence&&(this.listLoading=!0,Object(l.i)({sequence:t,id:i}).then(function(e){n.dataOk=!1,n.$message.success("排序成功！"),n.fetchData(),n.listLoading=!1}).catch(function(e){n.listLoading=!1}))},dictTransform:function(e,t){for(var i=this.dict[e],n=0;n<i.length;n++)if(t==i[n].key)return i[n].value},handleCurrentChange:function(e){this.pageNo=e,this.fetchData()},checkBtn:function(e,t){var i=this,n={token:e,id:t},a=this,o=void 0;a.dialogLoading=!0,Object(l.b)(n).then(function(e){o="校验成功！API-KEY是"+i.dicts.tokenStatus.obj[e.result.tokenStatus]+"的",a.$message({message:o,type:"success"}),a.dialogLoading=!1,a.fetchData(),a.dialogLoading=!1,a.fetchData()}).catch(function(e){a.dialogLoading=!1,a.fetchData()})},clickBtn:function(e,t){var i=this;this.formType=e,1===e?a()(i.form).forEach(function(e){i.form[e]="initStatus"==e?0:""}):this.getInfo(t),this.formVisible=!0},getInfo:function(e){var t=this,i=this;this.dialogLoading=!0,Object(l.c)(e).then(function(e){var n;n=e.result,a()(i.form).forEach(function(e){i.form[e]=n[e]}),t.dialogLoading=!1})},valid:function(){for(var e in r){var t=this.form[e];if(void 0===t||null===t||""===t.toString().trim()){var i=r[e]+"不能为空！";return this.$message.error(i),!1}}return!0},addSubmit:function(){if(this.valid()){var e=this,t="";this.dialogLoading=!0,1===this.formType?(t="添加成功！",Object(l.a)(this.form).then(function(e){i()})):2===this.formType&&(t="修改成功！",Object(l.g)(this.form).then(function(e){i()}))}function i(){e.$message({message:t,type:"success"}),e.formVisible=!1,e.dialogLoading=!1,e.fetchData()}},addCancel:function(){this.formVisible=!1}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[i("el-form-item",{attrs:{label:"矿场名称："}},[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.listQuery.idMine,callback:function(t){e.$set(e.listQuery,"idMine",t)},expression:"listQuery.idMine"}},e._l(e.dicts.mineList,function(e){return i("el-option",{key:e.id,attrs:{label:e.nameCn,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"子账户："}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入子账户"},model:{value:e.listQuery.nameEn,callback:function(t){e.$set(e.listQuery,"nameEn",t)},expression:"listQuery.nameEn"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"API-KEY有效状态："}},[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.listQuery.tokenStatus,callback:function(t){e.$set(e.listQuery,"tokenStatus",t)},expression:"listQuery.tokenStatus"}},e._l(e.dicts.tokenStatus.list,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchData}},[e._v("查询")]),e._v(" "),e.btn.add?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.clickBtn(1)}}},[e._v("新增")]):e._e(),e._v(" "),e.btn.sequence?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.sequenceBtn("1")}}},[e._v(e._s(e.sequenceStatus?"关闭":e.btn.sequence))]):e._e()],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",stripe:"",fit:"","highlight-current-row":""}},[e.btn.sequence?i("el-table-column",{attrs:{align:"center",label:"排序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.sequenceStatus,expression:"!sequenceStatus"}]},[e._v(" "+e._s(t.row.sequence))]),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.sequenceStatus&&e.dataOk,expression:"sequenceStatus&&dataOk"}],staticClass:"filter-item",attrs:{maxlength:"8"},on:{blur:function(i){e.sequenceChange(t.$index,e.list[t.$index].newSquence,t.row.id)}},model:{value:e.list[t.$index].newSquence,callback:function(i){e.$set(e.list[t.$index],"newSquence",i)},expression:"list[scope.$index].newSquence"}})]}}])}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"矿场名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nameMine)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"根账户",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nameCn)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"子账户",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nameEn)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"子账户中文名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nameSubCn)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"矿池名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.poolName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"API-KEY",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.token)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"API-KEY有效状态",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.dicts.tokenStatus.obj[t.row.tokenStatus]))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"矿池URL",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.poolConnectUrl)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"矿池类型",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.dicts.poolType.obj[t.row.poolType]))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"账户状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.dicts.initStatus.obj[t.row.initStatus]))])]}}])}),e._v(" "),i("el-table-column",{staticStyle:{"white-space":"nowrap"},attrs:{align:"center",label:"操作","class-name":"mid-padding fixed-width",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.btn.check?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){e.checkBtn(t.row.token,t.row.id)}}},[e._v(e._s(e.btn.check))]):e._e(),e._v(" "),e.btn.edit?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){e.clickBtn(2,t.row.id)}}},[e._v("修改")]):e._e(),e._v(" "),e.btn.info?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){e.clickBtn(3,t.row.id)}}},[e._v("查看")]):e._e()]}}])})],1),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,30,40,50,60,70,80,90,100],"current-page":e.pageNo,total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.formTitle,visible:e.formVisible,width:"960px"},on:{"update:visible":function(t){e.formVisible=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"form",attrs:{model:e.form,"label-width":"130px"}},[i("el-row",[i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"矿场名称",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:3===e.formType},model:{value:e.form.idMine,callback:function(t){e.$set(e.form,"idMine",t)},expression:"form.idMine"}},e._l(e.dicts.mineList,function(e){return i("el-option",{key:e.id,attrs:{label:e.nameCn,value:e.id}})}))],1)],1),e._v(" "),i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"矿池名称",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:3===e.formType},model:{value:e.form.idMineralPool,callback:function(t){e.$set(e.form,"idMineralPool",t)},expression:"form.idMineralPool"}},e._l(e.dicts.poolList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)]),e._v(" "),i("el-row",[i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"根账户",required:""}},[i("el-input",{attrs:{disabled:3===e.formType,maxlength:"30"},model:{value:e.form.nameCn,callback:function(t){e.$set(e.form,"nameCn",t)},expression:"form.nameCn"}})],1)],1),e._v(" "),i("div",{staticClass:"el-col el-col-12"})]),e._v(" "),i("el-row",[i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"子账户",required:""}},[i("el-input",{attrs:{disabled:3===e.formType,maxlength:"30"},model:{value:e.form.nameEn,callback:function(t){e.$set(e.form,"nameEn",t)},expression:"form.nameEn"}})],1)],1),e._v(" "),i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"子账户中文名"}},[i("el-input",{attrs:{disabled:3===e.formType,maxlength:"30"},model:{value:e.form.nameSubCn,callback:function(t){e.$set(e.form,"nameSubCn",t)},expression:"form.nameSubCn"}})],1)],1)]),e._v(" "),i("el-row",[i("div",{staticClass:"el-col el-col-24"},[i("el-form-item",{attrs:{label:"API-KEY"}},[i("el-input",{attrs:{disabled:3===e.formType,maxlength:"50"},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1)],1)]),e._v(" "),i("el-row",[i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"账户状态"}},[i("el-radio-group",{attrs:{disabled:3===e.formType},model:{value:e.form.initStatus,callback:function(t){e.$set(e.form,"initStatus",t)},expression:"form.initStatus"}},e._l(e.dicts.initStatus.list,function(t,n){return i("el-radio",{key:n,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),1!==e.formType?i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"API-KEY有效状态"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:!0},model:{value:e.form.tokenStatus,callback:function(t){e.$set(e.form,"tokenStatus",t)},expression:"form.tokenStatus"}},e._l(e.dicts.tokenStatus.list,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1):e._e()]),e._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{disabled:3===e.formType,type:"textarea",rows:6,maxlength:"200"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),1!==e.formType?i("el-row",[i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"创建人"}},[i("el-input",{attrs:{disabled:3===e.formType||2===e.formType},model:{value:e.form.nameCreator,callback:function(t){e.$set(e.form,"nameCreator",t)},expression:"form.nameCreator"}})],1)],1),e._v(" "),i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"创建时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:3===e.formType||2===e.formType,type:"datetime"},model:{value:e.form.timeCreate,callback:function(t){e.$set(e.form,"timeCreate",t)},expression:"form.timeCreate"}})],1)],1)]):e._e(),e._v(" "),3===e.formType?i("el-row",[i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"修改人"}},[i("el-input",{attrs:{disabled:3===e.formType},model:{value:e.form.nameUpdater,callback:function(t){e.$set(e.form,"nameUpdater",t)},expression:"form.nameUpdater"}})],1)],1),e._v(" "),i("div",{staticClass:"el-col el-col-12"},[i("el-form-item",{attrs:{label:"修改时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:3===e.formType,type:"datetime"},model:{value:e.form.timeUpdate,callback:function(t){e.$set(e.form,"timeUpdate",t)},expression:"form.timeUpdate"}})],1)],1)]):e._e(),e._v(" "),i("el-form-item",[3!==e.formType?i("el-button",{attrs:{type:"primary"},on:{click:e.addSubmit}},[e._v(e._s(e.btnName))]):e._e(),e._v(" "),3!==e.formType?i("el-button",{on:{click:e.addCancel}},[e._v("取消")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]},d=i("/Xao")(c,u,!1,null,null,null);t.default=d.exports}});